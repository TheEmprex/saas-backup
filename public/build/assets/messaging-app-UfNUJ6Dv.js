var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,o)=>{for(var s in o||(o={}))a.call(o,s)&&r(e,s,o[s]);if(t)for(var s of t(o))l.call(o,s)&&r(e,s,o[s]);return e},s=(e,t,a)=>new Promise((l,r)=>{var o=e=>{try{n(a.next(e))}catch(t){r(t)}},s=e=>{try{n(a.throw(e))}catch(t){r(t)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,s);n((a=a.apply(e,t)).next())});import{r as n,i,o as d,w as c,a as u,b as g,d as p,u as v,h as m,e as h,t as y,n as f,f as x,g as k,F as b,j as w,T as C,k as F,l as M,m as z,p as D,v as S,q as U,c as j}from"./vue-vendor-CqjvUEUK.js";import{_ as E,P as T}from"./PWAPrompts-DPFNXmvV.js";import"./preload-helper-Cqtb6kru.js";function L(){const e=n("system"),t=n("light"),a=n("light"),l=i(()=>"dark"===t.value),r=[{value:"light",label:"Light",icon:"☀️",description:"Clean and bright"},{value:"dark",label:"Dark",icon:"🌙",description:"Easy on the eyes"},{value:"system",label:"System",icon:"💻",description:"Match device preference"}],o=()=>{const e=window.matchMedia("(prefers-color-scheme: dark)");return a.value=e.matches?"dark":"light",a.value},s=e=>{const a=document.documentElement;a.classList.remove("light","dark"),a.classList.add(e),a.setAttribute("data-theme",e),u(e),t.value=e},u=e=>{const t=document.querySelector('meta[name="theme-color"]'),a={light:"#ffffff",dark:"#1f2937"};if(t)t.content=a[e]||a.light;else{const t=document.createElement("meta");t.name="theme-color",t.content=a[e]||a.light,document.head.appendChild(t)}},g=e=>"system"===e?o():e,p=t=>{if(!r.find(e=>e.value===t))return;e.value=t;try{localStorage.setItem("onlyverified-theme",t)}catch(l){}const a=g(t);s(a),window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:t,resolvedTheme:a}}))},v=()=>{o();const t=(()=>{try{const e=localStorage.getItem("onlyverified-theme");if(e&&r.find(t=>t.value===e))return e}catch(e){}return"system"})();e.value=t;const a=g(t);s(a)};return d(()=>{v();const t=(()=>{if(!window.matchMedia)return;const t=window.matchMedia("(prefers-color-scheme: dark)"),l=t=>{a.value=t.matches?"dark":"light","system"===e.value&&s(a.value)};return t.addEventListener?t.addEventListener("change",l):t.addListener(l),()=>{t.removeEventListener?t.removeEventListener("change",l):t.removeListener(l)}})();return()=>{t&&t()}}),c(e,e=>{const t=g(e);s(t)}),{theme:e,resolvedTheme:t,systemTheme:a,isDark:l,setTheme:p,toggleTheme:()=>{const t=g(e.value);p("dark"===t?"light":"dark")},cycleTheme:()=>{const t=(r.findIndex(t=>t.value===e.value)+1)%r.length;p(r[t].value)},getThemeInfo:(t=e.value)=>r.find(e=>e.value===t)||r[0],themes:r,isThemeSupported:()=>window.matchMedia&&window.localStorage,autoThemeByTime:(a=!1)=>{if(!a)return;const l=()=>{const a=(new Date).getHours(),l=a<7||a>19?"dark":"light";"system"===e.value&&t.value!==l&&p(l)},r=setInterval(l,36e5);return l(),()=>clearInterval(r)},applyTheme:s,detectSystemTheme:o}}const B={class:"theme-switcher"},_=["title"],I={key:0,class:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},O={key:1,class:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},A={key:1,class:"relative"},P={class:"text-xl"},$={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},R={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50"},N=["onClick"],W={class:"text-lg mr-3"},K={class:"text-sm font-medium text-gray-900 dark:text-white"},q={class:"text-xs text-gray-500 dark:text-gray-400"},H={key:0,class:"ml-auto w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"currentColor",viewBox:"0 0 20 20"},X={key:2,class:"space-y-3"},V={class:"grid grid-cols-1 gap-2"},G=["value","checked","onChange"],J={class:"flex items-center"},Q={class:"text-2xl mr-4"},Y={class:"flex-1"},Z={class:"flex items-center"},ee={class:"text-sm"},te={class:"font-medium text-gray-900 dark:text-white"},ae={class:"text-gray-500 dark:text-gray-400"},le={class:"text-sm"},re={key:0,class:"ml-4 text-indigo-600 dark:text-indigo-400"},oe={key:3,class:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1"},se=["onClick","title"],ne={class:"text-base mr-1"},ie={class:"hidden sm:inline"},de=E({__name:"ThemeSwitcher",props:{variant:{type:String,default:"inline",validator:e=>["toggle","dropdown","radio","inline"].includes(e)}},setup(e){const t=L(),a=n(!1),l=i(()=>t.getThemeInfo()),r=e=>{t.setTheme(e),a.value=!1},o=e=>{e.target.closest(".theme-switcher")||(a.value=!1)};return d(()=>{document.addEventListener("click",o)}),u(()=>{document.removeEventListener("click",o)}),(o,s)=>(p(),g("div",B,["toggle"===e.variant?(p(),g("button",{key:0,onClick:s[0]||(s[0]=e=>v(t).toggleTheme()),class:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:`Switch to ${v(t).isDark.value?"light":"dark"} mode`},[v(t).isDark.value?(p(),g("svg",I,[...s[2]||(s[2]=[m("path",{"fill-rule":"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule":"evenodd"},null,-1)])])):(p(),g("svg",O,[...s[3]||(s[3]=[m("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},null,-1)])]))],8,_)):"dropdown"===e.variant?(p(),g("div",A,[m("button",{onClick:s[1]||(s[1]=e=>a.value=!a.value),class:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},[m("span",P,y(l.value.icon),1),m("span",$,y(l.value.label),1),(p(),g("svg",{class:f(["w-4 h-4 text-gray-500",{"rotate-180":a.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[4]||(s[4]=[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),h(C,{name:"dropdown"},{default:x(()=>[a.value?(p(),g("div",R,[(p(!0),g(b,null,w(v(t).themes,e=>(p(),g("button",{key:e.value,onClick:t=>r(e.value),class:f(["w-full flex items-center px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",{"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":v(t).theme.value===e.value}])},[m("span",W,y(e.icon),1),m("div",null,[m("div",K,y(e.label),1),m("div",q,y(e.description),1)]),v(t).theme.value===e.value?(p(),g("svg",H,[...s[5]||(s[5]=[m("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):k("",!0)],10,N))),128))])):k("",!0)]),_:1})])):"radio"===e.variant?(p(),g("div",X,[s[7]||(s[7]=m("h3",{class:"text-sm font-medium text-gray-900 dark:text-white mb-3"},"Appearance",-1)),m("div",V,[(p(!0),g(b,null,w(v(t).themes,e=>(p(),g("label",{key:e.value,class:f(["relative flex cursor-pointer rounded-lg border p-4 focus:outline-none",[v(t).theme.value===e.value?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-400":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"]])},[m("input",{type:"radio",value:e.value,checked:v(t).theme.value===e.value,onChange:t=>r(e.value),class:"sr-only"},null,40,G),m("div",J,[m("div",Q,y(e.icon),1),m("div",Y,[m("div",Z,[m("div",ee,[m("p",te,y(e.label),1),m("div",ae,[m("p",le,y(e.description),1)])])])]),v(t).theme.value===e.value?(p(),g("div",re,[...s[6]||(s[6]=[m("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[m("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):k("",!0)])],2))),128))])])):(p(),g("div",oe,[(p(!0),g(b,null,w(v(t).themes,e=>(p(),g("button",{key:e.value,onClick:t=>r(e.value),class:f(["flex items-center justify-center px-3 py-2 rounded-md text-sm font-medium transition-colors",[v(t).theme.value===e.value?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"]]),title:e.description},[m("span",ne,y(e.icon),1),m("span",ie,y(e.label),1)],10,se))),128))]))]))}},[["__scopeId","data-v-d5950115"]]);function ce(e={}){const t=o(o({},{accept:"*/*",multiple:!0,maxFiles:10,maxSize:10485760,autoUpload:!1,uploadUrl:"/api/upload",uploadMethod:"POST",headers:{},onProgress:null,onComplete:null,onError:null}),e),a=n(!1),l=n(!1),r=n([]),d=n({}),c=n([]),g=n([]),p=i(()=>r.value.length>0),v=i(()=>r.value.length<t.maxFiles),m=i(()=>r.value.reduce((e,t)=>{var a;return e+((null==(a=t.file)?void 0:a.size)||0)},0)),h=i(()=>C(m.value)),y=e=>{const a=Date.now()+Math.random(),l=(e=>{const a=[];e.size>t.maxSize&&a.push(`File too large. Maximum size is ${C(t.maxSize)}`),"*/*"!==t.accept&&(t.accept.split(",").map(e=>e.trim()).some(t=>t.startsWith(".")?e.name.toLowerCase().endsWith(t.toLowerCase()):!!t.includes("/")&&e.type.match(t.replace("*",".*")))||a.push(`File type not accepted. Accepted types: ${t.accept}`));return a})(e);return{id:a,file:e,name:e.name,size:e.size,sizeFormatted:C(e.size),type:e.type,lastModified:e.lastModified,preview:null,status:l.length>0?"invalid":"pending",progress:0,errors:l,uploadResponse:null}},f=e=>s(null,null,function*(){if(e.file.type.startsWith("image/"))try{const t=URL.createObjectURL(e.file);e.preview=t}catch(t){}}),x=e=>s(null,null,function*(){const a=Array.from(e);if(r.value.length+a.length>t.maxFiles){const e=`Cannot add ${a.length} files. Maximum is ${t.maxFiles} files total.`;return c.value.push(e),!1}const l=a.map(y);if(yield Promise.all(l.map(f)),r.value.push(...l),t.autoUpload){const e=l.filter(e=>"invalid"!==e.status);e.length>0&&b(e.map(e=>e.id))}return!0}),k=()=>{r.value.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),r.value=[],d.value={},c.value=[]},b=(e=null)=>s(null,null,function*(){const t=e?r.value.filter(t=>e.includes(t.id)&&"pending"===t.status):r.value.filter(e=>"pending"===e.status);if(0!==t.length){l.value=!0;try{yield w(t)}finally{l.value=!1}}}),w=a=>s(null,null,function*(){var l;a.forEach(e=>{e.status="uploading",e.progress=0});const r=new FormData;a.forEach((e,t)=>{r.append("files[]",e.file)}),e.formData&&Object.entries(e.formData).forEach(([e,t])=>{r.append(e,t)});try{const e=yield fetch(t.uploadUrl,{method:t.uploadMethod,headers:o({"X-CSRF-TOKEN":null==(l=document.querySelector('meta[name="csrf-token"]'))?void 0:l.content},t.headers),body:r});if(!e.ok)throw new Error(`Upload failed: ${e.statusText}`);const s=yield e.json();a.forEach(e=>{e.status="completed",e.progress=100,e.uploadResponse=s,g.value.push(e),t.onComplete&&t.onComplete(e,s)})}catch(s){a.forEach(e=>{e.status="failed",e.errors.push(s.message),t.onError&&t.onError(e,s)})}}),C=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},F=()=>{k()};return u(()=>{F()}),{isDragOver:a,isUploading:l,files:r,uploadProgress:d,errors:c,completedUploads:g,hasFiles:p,canAddMore:v,totalSize:m,totalSizeFormatted:h,addFiles:x,removeFile:e=>{const t=r.value.findIndex(t=>t.id===e);if(t>-1){const a=r.value[t];a.preview&&URL.revokeObjectURL(a.preview),r.value.splice(t,1),delete d.value[e]}},clearFiles:k,uploadFiles:b,retryUpload:a=>{const l=r.value.find(e=>e.id===a);l&&"failed"===l.status&&(l.errors=[],l.status="pending",(a=>{s(null,null,function*(){var l;a.status="uploading",a.progress=0;const r=new FormData;r.append("file",a.file),e.formData&&Object.entries(e.formData).forEach(([e,t])=>{r.append(e,t)});try{const e=yield fetch(t.uploadUrl,{method:t.uploadMethod,headers:o({"X-CSRF-TOKEN":null==(l=document.querySelector('meta[name="csrf-token"]'))?void 0:l.content},t.headers),body:r});if(!e.ok)throw new Error(`Upload failed: ${e.statusText}`);const s=yield e.json();a.status="completed",a.progress=100,a.uploadResponse=s,g.value.push(a),t.onComplete&&t.onComplete(a,s)}catch(s){a.status="failed",a.errors.push(s.message),t.onError&&t.onError(a,s)}})})(l))},handleDragEnter:e=>{e.preventDefault(),e.stopPropagation(),a.value=!0},handleDragLeave:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.contains(e.relatedTarget)||(a.value=!1)},handleDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=v.value?"copy":"none"},handleDrop:e=>s(null,null,function*(){e.preventDefault(),e.stopPropagation(),a.value=!1;const{files:t}=e.dataTransfer;t.length>0&&v.value&&(yield x(t))}),handleFileInput:e=>s(null,null,function*(){const{files:t}=e.target;t.length>0&&(yield x(t)),e.target.value=""}),formatFileSize:C,getFileIcon:e=>e.startsWith("image/")?"🖼️":e.startsWith("video/")?"🎥":e.startsWith("audio/")?"🎵":e.includes("pdf")?"📄":e.includes("word")?"📝":e.includes("excel")||e.includes("spreadsheet")?"📊":e.includes("powerpoint")||e.includes("presentation")?"📽️":e.includes("zip")||e.includes("rar")?"📦":"📎",getFilesByStatus:e=>r.value.filter(t=>t.status===e),config:t,cleanup:F}}const ue={class:"file-upload"},ge=["accept","multiple","disabled"],pe={class:"text-center"},ve={class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 dark:bg-gray-800 mb-4"},me={key:0,class:"h-8 w-8 text-indigo-500 animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he={key:1,class:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ye={class:"mb-2"},fe={class:"text-xl font-medium text-gray-900 dark:text-white"},xe={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},ke={class:"text-xs text-gray-400 dark:text-gray-500 space-y-1"},be={key:0},we={key:1},Ce={key:0,class:"mt-6"},Fe={class:"flex items-center justify-between mb-4"},Me={class:"text-lg font-medium text-gray-900 dark:text-white"},ze={class:"flex items-center space-x-2"},De=["disabled"],Se={key:0,class:"flex items-center"},Ue={key:1},je={class:"grid grid-cols-1 gap-4"},Ee={class:"flex-shrink-0 mr-4"},Te={key:0,class:"h-12 w-12 rounded-lg overflow-hidden"},Le=["src","alt"],Be={key:1,class:"h-12 w-12 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-xl"},_e={class:"flex-1 min-w-0"},Ie={class:"flex items-center justify-between"},Oe={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Ae={class:"flex items-center space-x-2"},Pe={class:"flex items-center space-x-1"},$e=["onClick"],Re=["onClick"],Ne={class:"mt-1 flex items-center text-sm text-gray-500 dark:text-gray-400"},We={key:0,class:"mt-2"},Ke={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},qe={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},He={key:1,class:"mt-2"},Xe={key:0,class:"fixed bottom-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 max-w-sm"},Ve={class:"flex items-center"},Ge={class:"ml-3"},Je={class:"text-xs text-gray-500 dark:text-gray-400"},Qe=E({__name:"FileUpload",props:{accept:{type:String,default:"image/*,video/*,audio/*,.pdf,.doc,.docx"},multiple:{type:Boolean,default:!0},maxFiles:{type:Number,default:5},maxSize:{type:Number,default:10485760},autoUpload:{type:Boolean,default:!1},uploadUrl:{type:String,default:"/api/upload"},formData:{type:Object,default:()=>({})},conversationId:{type:[Number,String],default:null}},emits:["files-added","file-uploaded","upload-complete","upload-error"],setup(e,{emit:t}){const a=e,l=t,r=i(()=>o(o({},a.formData),a.conversationId&&{conversation_id:a.conversationId})),s=ce({accept:a.accept,multiple:a.multiple,maxFiles:a.maxFiles,maxSize:a.maxSize,autoUpload:a.autoUpload,uploadUrl:a.uploadUrl,formData:r.value,onComplete:(e,t)=>{l("file-uploaded",{fileInfo:e,result:t})},onError:(e,t)=>{l("upload-error",{fileInfo:e,error:t})}}),{isDragOver:n,isUploading:d,files:u,hasFiles:D,canAddMore:S,totalSizeFormatted:U}=s;return c(()=>u.value.length,(e,t)=>{e>t&&l("files-added",u.value.slice(t))}),c(()=>s.completedUploads.value.length,e=>{e>0&&l("upload-complete",s.completedUploads.value)}),(e,t)=>(p(),g("div",ue,[m("div",{class:f(["relative border-2 border-dashed rounded-lg p-6 transition-colors duration-200",[v(n)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500",!v(S)&&"opacity-50 cursor-not-allowed"]]),onDragenter:t[1]||(t[1]=(...e)=>v(s).handleDragEnter&&v(s).handleDragEnter(...e)),onDragleave:t[2]||(t[2]=(...e)=>v(s).handleDragLeave&&v(s).handleDragLeave(...e)),onDragover:t[3]||(t[3]=(...e)=>v(s).handleDragOver&&v(s).handleDragOver(...e)),onDrop:t[4]||(t[4]=(...e)=>v(s).handleDrop&&v(s).handleDrop(...e))},[m("input",{ref:"fileInput",type:"file",accept:v(s).config.accept,multiple:v(s).config.multiple,onChange:t[0]||(t[0]=(...e)=>v(s).handleFileInput&&v(s).handleFileInput(...e)),class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:!v(S)},null,40,ge),m("div",pe,[m("div",ve,[v(n)?(p(),g("svg",me,[...t[7]||(t[7]=[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3-3m0 0l3 3m-3-3v12"},null,-1)])])):(p(),g("svg",he,[...t[8]||(t[8]=[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1)])]))]),m("div",ye,[m("p",fe,y(v(n)?"Drop files here":"Upload files"),1),m("p",xe,y(v(n)?"Release to upload":"Drag & drop files here, or click to browse"),1)]),m("div",ke,["*/*"!==v(s).config.accept?(p(),g("p",be," Accepted types: "+y(v(s).config.accept),1)):k("",!0),m("p",null," Max "+y(v(s).config.maxFiles)+" files, "+y(v(s).formatFileSize(v(s).config.maxSize))+" each ",1),v(D)?(p(),g("p",we,y(v(u).length)+"/"+y(v(s).config.maxFiles)+" files selected ("+y(v(U))+") ",1)):k("",!0)])])],34),h(C,{name:"fade"},{default:x(()=>[v(D)?(p(),g("div",Ce,[m("div",Fe,[m("h3",Me," Files ("+y(v(u).length)+") ",1),m("div",ze,[!v(s).config.autoUpload&&v(s).getFilesByStatus("pending").length>0?(p(),g("button",{key:0,onClick:t[5]||(t[5]=e=>v(s).uploadFiles()),disabled:v(d),class:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white text-sm rounded-md font-medium transition-colors"},[v(d)?(p(),g("span",Se,[...t[9]||(t[9]=[m("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[m("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),m("path",{class:"opacity-75",fill:"currentColor",d:"m15.84 12.34.13-.71c1.36-.09 2.19.49 2.19 1.55 0 1.06-.83 1.64-2.19 1.55l-.13-.71z"})],-1),F(" Uploading... ",-1)])])):(p(),g("span",Ue,"Upload All"))],8,De)):k("",!0),m("button",{onClick:t[6]||(t[6]=(...e)=>v(s).clearFiles&&v(s).clearFiles(...e)),class:"px-3 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded-md font-medium transition-colors"}," Clear All ")])]),m("div",je,[h(M,{name:"file-list"},{default:x(()=>[(p(!0),g(b,null,w(v(u),e=>(p(),g("div",{key:e.id,class:"flex items-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"},[m("div",Ee,[e.preview?(p(),g("div",Te,[m("img",{src:e.preview,alt:e.name,class:"h-full w-full object-cover"},null,8,Le)])):(p(),g("div",Be,y(v(s).getFileIcon(e.type)),1))]),m("div",_e,[m("div",Ie,[m("p",Oe,y(e.name),1),m("div",Ae,[m("span",{class:f(["inline-flex px-2 py-1 text-xs font-medium rounded-full",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":"pending"===e.status,"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300":"uploading"===e.status,"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"completed"===e.status,"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":"failed"===e.status||"invalid"===e.status}])},y(e.status),3),m("div",Pe,["failed"===e.status?(p(),g("button",{key:0,onClick:t=>v(s).retryUpload(e.id),class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Retry upload"},[...t[10]||(t[10]=[m("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,$e)):k("",!0),m("button",{onClick:t=>v(s).removeFile(e.id),class:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400",title:"Remove file"},[...t[11]||(t[11]=[m("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Re)])])]),m("div",Ne,[m("span",null,y(e.sizeFormatted),1),t[12]||(t[12]=m("span",{class:"mx-2"},"•",-1)),m("span",null,y(e.type||"Unknown type"),1)]),"uploading"===e.status?(p(),g("div",We,[m("div",Ke,[m("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:z({width:e.progress+"%"})},null,4)]),m("p",qe,y(e.progress)+"% uploaded ",1)])):k("",!0),e.errors.length>0?(p(),g("div",He,[(p(!0),g(b,null,w(e.errors,e=>(p(),g("div",{key:e,class:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded px-2 py-1"},y(e),1))),128))])):k("",!0)])]))),128))]),_:1})])])):k("",!0)]),_:1}),h(C,{name:"fade"},{default:x(()=>[v(d)?(p(),g("div",Xe,[m("div",Ve,[t[14]||(t[14]=m("div",{class:"flex-shrink-0"},[m("svg",{class:"animate-spin h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},[m("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),m("path",{class:"opacity-75",fill:"currentColor",d:"m15.84 12.34.13-.71c1.36-.09 2.19.49 2.19 1.55 0 1.06-.83 1.64-2.19 1.55l-.13-.71z"})])],-1)),m("div",Ge,[t[13]||(t[13]=m("p",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Uploading files... ",-1)),m("p",Je,y(v(s).getFilesByStatus("uploading").length)+" of "+y(v(u).length)+" files ",1)])])])):k("",!0)]),_:1})]))}},[["__scopeId","data-v-002ebb7f"]]),Ye={class:"flex w-full h-full"},Ze={class:"w-1/3 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700"},et={class:"space-y-1 px-2"},tt=["onClick"],at={class:"space-y-1 px-2"},lt=["onClick"],rt={class:"flex-1 flex flex-col"},ot={class:"bg-gray-100 dark:bg-gray-800 p-4 flex items-center justify-between"},st={class:"text-xl font-semibold text-gray-900 dark:text-white"},nt={class:"flex items-center space-x-2"},it={class:"flex-1 overflow-y-auto p-4 bg-white dark:bg-gray-900"},dt={class:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 space-y-4"},ct={class:"flex items-center space-x-2"},ut=["disabled"],gt={key:0,class:"border-t border-gray-200 dark:border-gray-700 pt-4"};j(E({__name:"MessagingApp",setup(e){const t=n([]),a=n([]),l=n([]),r=n(null),o=n(""),s=n(!1),c=i(()=>window.MessagingApp.apiBaseUrl),u=i(()=>window.MessagingApp.user.id),v=e=>{fetch(`${c.value}/conversations/${e}`).then(e=>e.json()).then(e=>l.value=e.messages)},F=()=>{o.value&&fetch(`${c.value}/conversations/${r.value.id}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":window.MessagingApp.csrfToken},body:JSON.stringify({content:o.value})}).then(e=>e.json()).then(e=>{e.success&&(l.value.push(e.message),o.value="")})},M=e=>{},z=(e,t)=>{(null==t?void 0:t.message)&&l.value.push(t.message),(null==t?void 0:t.success)&&(s.value=!1)},j=(e,t)=>{alert(`Failed to upload ${e.name}: ${t.message}`)};return d(()=>{fetch(`${c.value}/folders`).then(e=>e.json()).then(e=>t.value=e.folders),fetch(`${c.value}/conversations`).then(e=>e.json()).then(e=>a.value=e.conversations),window.connectToMessaging(u.value)}),(e,n)=>{var i;return p(),g("div",Ye,[h(T),m("aside",Ze,[n[2]||(n[2]=m("h2",{class:"text-lg font-semibold p-4 text-gray-900 dark:text-white"},"Folders",-1)),m("ul",et,[(p(!0),g(b,null,w(t.value,e=>(p(),g("li",{key:e.id,onClick:e=>{},class:"p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer text-gray-700 dark:text-gray-300 transition-colors"},y(e.name)+" ("+y(e.unread_count)+") ",9,tt))),128))]),n[3]||(n[3]=m("h2",{class:"text-lg font-semibold p-4 text-gray-900 dark:text-white border-t border-gray-200 dark:border-gray-700 mt-4"},"Conversations",-1)),m("ul",at,[(p(!0),g(b,null,w(a.value,e=>(p(),g("li",{key:e.id,onClick:t=>(e=>{r.value=e,v(e.id)})(e),class:"p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer text-gray-700 dark:text-gray-300 transition-colors"},y(e.other_user.name),9,lt))),128))])]),m("div",rt,[m("header",ot,[m("h3",st,y(null==(i=r.value)?void 0:i.other_user.name),1),m("div",nt,[h(de,{variant:"toggle"})])]),m("main",it,[(p(!0),g(b,null,w(l.value,e=>(p(),g("div",{key:e.id,class:f([{"text-right":e.is_mine},"mb-4"])},[m("span",{class:f([{"bg-indigo-500 dark:bg-indigo-600 text-white":e.is_mine,"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white":!e.is_mine},"inline-block rounded-lg px-4 py-2 max-w-xs break-words"])},y(e.content),3)],2))),128))]),m("footer",dt,[m("div",ct,[m("button",{onClick:n[0]||(n[0]=e=>s.value=!s.value),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Attach files"},[...n[4]||(n[4]=[m("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)])]),D(m("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=e=>o.value=e),onKeyup:U(F,["enter"]),placeholder:"Type a message...",class:"flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors"},null,544),[[S,o.value]]),m("button",{onClick:F,disabled:!o.value.trim(),class:"p-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors"},[...n[5]||(n[5]=[m("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,ut)]),h(C,{name:"slide-down"},{default:x(()=>{var e;return[s.value?(p(),g("div",gt,[h(Qe,{accept:"image/*,video/*,audio/*,.pdf,.doc,.docx","max-files":3,"max-size":5242880,"upload-url":`${c.value}/messages/upload-files`,"conversation-id":null==(e=r.value)?void 0:e.id,onFilesAdded:M,onFileUploaded:z,onUploadError:j},null,8,["upload-url","conversation-id"])])):k("",!0)]}),_:1})])])])}}},[["__scopeId","data-v-247f2399"]])).mount("#vue-messaging-app");
